<div class="container" *ngIf="infoMessage">
    {{infoMessage}}
</div>

<div class="container" *ngIf="errorMessage">
    {{errorMessage}}
</div>

<div *ngIf="newUserCreatedMsg">
    {{newUserCreatedMsg}}
</div>

<div class="container">
    <form #loginForm="ngForm" (ngSubmit)="login(loginForm)" class="form-horizontal" role="form">
        <div class="form-group">
            <label for="username" class="col-sm-3 control-label">Username*</label>
            <div class="col-sm-9">
                <input id="username" name="username" #username="ngModel" type="username" placeholder="Username" [(ngModel)]="customer.username" class="form-control" required="true">
            </div>
            <div *ngIf="username.invalid && (username.dirty || username.touched || submitted)" style="color: red;">
                <div *ngIf="username.errors.required">
                    Username is required
                </div>
            </div>
        </div>
        <div class="form-group">
            <label for="password" class="col-sm-3 control-label">Password*</label>
            <div class="col-sm-9">
                <input id="password" name="password" #password="ngModel" type="password" placeholder="Password" [(ngModel)]="customer.password" class="form-control" required="true">
            </div>
            <div *ngIf="password.invalid && (password.dirty || password.touched || submitted)" style="color: red;">
                <div *ngIf="password.errors.required">
                    Password is required
                </div>
            </div>
        </div>
        <button type="submit" class="btn btn-light">Login</button>
    </form> <!-- /form -->
</div> <!-- ./container -->

<div class = "container">
    <h5> Don't have an account yet? Sign up now! </h5>
</div>

<ng-template #content let-modal>
    <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Account Registration</h4>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body">
        <form #createCustomerForm="ngForm" (ngSubmit)="createCustomer(createCustomerForm)" class="form-horizontal" role="form">
            <div class="form-group">
                <label for="firstName" class="col-sm-3 control-label">First Name* </label>
                <div class="col-sm-9">
                    <input id="firstName" name="firstName" #firstName="ngModel" type="text" placeholder="First Name" [(ngModel)]="newCustomer.firstName" class="form-control" required="true">
                </div>
                <div *ngIf="firstName.invalid && (firstName.dirty || firstName.touched || submitted)" style="color: red;">
                    <div *ngIf="firstName.errors.required">
                        First Name is required
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="lastName" class="col-sm-3 control-label">Last Name* </label>
                <div class="col-sm-9">
                    <input id="lastName" name="lastName" #lastName="ngModel" type="text" placeholder="Last Name" [(ngModel)]="newCustomer.lastName" class="form-control" required="true">
                </div>
                <div *ngIf="lastName.invalid && (lastName.dirty || lastName.touched || submitted)" style="color: red;">
                    <div *ngIf="lastName.errors.required">
                        Last Name is required
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="usernameNew" class="col-sm-3 control-label">Username* </label>
                <div class="col-sm-9">
                    <input id="usernameNew" name="usernameNew" #usernameNew="ngModel" type="text" placeholder="Username" [(ngModel)]="newCustomer.username" class="form-control" required="true">
                </div>
                <div *ngIf="usernameNew.invalid && (usernameNew.dirty || usernameNew.touched || submitted)" style="color: red;">
                    <div *ngIf="usernameNew.errors.required">
                        Username is required
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="passwordNew" class="col-sm-3 control-label">Password* </label>
                <div class="col-sm-9">
                    <input id="passwordNew" name="passwordNew" #passwordNew="ngModel" type="password" placeholder="Password" [(ngModel)]="newCustomer.password" class="form-control" required="true">
                </div>
                <div *ngIf="passwordNew.invalid && (passwordNew.dirty || passwordNew.touched || submitted)" style="color: red;">
                    <div *ngIf="passwordNew.errors.required">
                        Password is required
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-3 control-label"> Preferences </label>
            </div>
            <div class="form-group" *ngFor="let tag of tags; index as i">
                    <input id="tag{{i}}" name = "tag{{i}}" type="checkbox" [(ngModel)]="selectedTags[i]"/>
                    <label for="tag{{i}}">{{tag.tagName}}</label>
            </div>
            <div class="form-group">
                <label for="email" class="col-sm-3 control-label">Email* </label>
                <div class="col-sm-9">
                    <input id="email" name="email" #email="ngModel" type="text" placeholder="Email" [(ngModel)]="newCustomer.email" class="form-control" required="true">
                </div>
                <div *ngIf="email.invalid && (email.dirty || email.touched || submitted)" style="color: red;">
                    <div *ngIf="email.errors.required">
                        Email is required
                    </div>
                </div>
            </div>
            <button type="submit" class="btn btn-outline-dark"> Submit </button>
        </form>
    </div>
</ng-template>

<div class = "container" >
    <!-- Button trigger modal -->
    <button class="btn btn-light" (click)="open(content)">Register</button>
</div>

<hr>

<pre>{{ closeResult }}</pre>
